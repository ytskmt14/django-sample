{### base.htmlを継承する ###}
{% extends 'base.html' %}

{### staticディレクトリ配下を参照するおまじない ###}
{% load static %}

{### ページタイトル（タブに表示されるとこ）を定義 ###}
{% block title %}旅のしおり詳細{% endblock %}

{### ページごとのcssを定義 ###}
{% block extra_css %}
{% endblock  %}

{### ページの内容を定義 ###}
{% block content %}
{### パンくずリスト ###}
<div class="ui breadcrumb">
    <a class="section" href="{% url 'bookmarkapp:index' %}">旅行のしおり一覧</a>
    <div class="divider"> > </div>
    <div class="active section">2020/01/01 ~ 2020/01/05 インド旅行</div>
</div>
<!-- タイトル -->
<div class="ui grid" style="margin-top:30px;">
    <div class="thirteen wide column">
        <h2 class="ui header">
            {## {% object.date_from %} ~ {% object.date_to %}  {% object.title %} ##}
            2020/01/01 ~ 2020/01/05 インド旅行
        </h2>
    </div>
    <div class="three wide column">
        <a href="#" class="ui green button" role="button">編集</a>
        <a href="{% url 'bookmarkapp:index' %}" class="ui black button" role="button">戻る</a>
    </div>
</div>
<!-- 日程 -->
<div class="ui styled accordion" style="margin-top: 40px;">
    <!-- Detailの数だけループ -->
    {% for item in detail_object %}
    <div class="title">
        <i class="calendar check outline icon"></i>
        {{ item.date }}　{{ item.main_content }}
    </div>
    <div class="content">
        <!-- SubDetailの数だけループ -->
        {% for sub_item in sub_detail_object %}
        <ul>
            <li class="sub_detail{{ forloop.counter }}">
                {{ sub_item.time }}　{{ sub_item.main_content }}
            </li>
        </ul>
        {% endfor %}
    </div>
    {% endfor %}
</div>
<!-- モーダル表示部分 -->
{% for sub_item in sub_detail_objects %}
<div class="ui modal modal{{ forloop.counter }}">
    <i class="close icon"></i>
    <div class="header">
        {{ sub_item.time }} {{ sub_item.main_content }}
        {% if sub_item.hp_url is not None %}
        <a href="{{ sub_object.hp_url }}" class="mini ui blue button position" role="button"
            style="position: absolute; right: 160px;">
            HP
        </a>
        {% endif %}
        {% if sub_item.map_url is not None %}
        <a href="{{ sub_object.map_url }}" class="mini ui teal button" id="detail_button" role="button"
            style="position: absolute; right: 90px;"> </a>
        地図
        </a>
        {% endif %}
        {% if sub_item.root_url is not None %}
        <a href="{{ sub_object.root_url }}" class="mini ui grey button" id="detail_button" role="button"
            style="position: absolute; right: 20px;"> </a>
        経路
        </a>
        {% endif %}
    </div>
    <div class="image content">
        <div class="ui small image">
            <img src="https://placehold.jp/200x200.png">
        </div>
        <div class="description">
            {% if sub_item.content1 is None %}
            まだやりたいことが登録されていません。
            {% else %}
            {% if sub_item.content1 is not None %}
            <li class="sub_content"> sub_item.content1</li>
            {% endif %}
            {% if sub_item.content2 is not None %}
            <li class="sub_content"> sub_item.content2</li>
            {% endif %}
            {% if sub_item.content3 is not None %}
            <li class="sub_content"> sub_item.content3</li>
            {% endif %}
            {% if sub_item.content4 is not None %}
            <li class="sub_content"> sub_item.content4</li>
            {% endif %}
            {% if sub_item.content5 is not None %}
            <li class="sub_content"> sub_item.content5</li>
            {% endif %}
            {% endif %}

        </div>
    </div>
</div>
{% endfor %}
{% endblock %}

{### ページごとのjsを定義 ###}
{% block extra_js %}
<script type="text/javascript">

    $(".ui.accordion").accordion();
    {% for item in detail_object %}
    $(".sub_detail{{ forloop.counter }}").click(function () {
        $('.ui.modal{{ forloop.counter }}').modal('show');
    });
    {% endfor %}

</script>
{% endblock  %}